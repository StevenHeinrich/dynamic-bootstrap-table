/**
Dynamic Bootstrap Table - 0.1.0
https://github.com/eherman/dynamic-bootstrap-table
Copyright (c) 2014 Eric Herman
License: MIT
*/
!function(a){function b(a){var b=1;return"-"===a[0]&&(b=-1,a=a.substr(1)),function(c,d){var e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return e*b}}a.fn.Datatable=function(b){return this.each(function(){var d=a(this),e=d.data("datatable");e||d.data("datatable",e=new c(this,b))}).data("datatable")};var c=function(b,c){this.$el=a(b),c&&a.extend(this,c),this.init()};c.prototype={sortable:!1,pagination:!1,paginatorSize:5,pageSizes:[5,10,20],currentPage:1,totalPages:1,init:function(){var b=this;if(this.masterData=this.data.slice(),this.$el.append(this.generateDatatableTemplate()),this.currentPageSize||(this.currentPageSize=this.pageSizes[0]),this.pagination){for(var c="",d=0;d<b.pageSizes.length;d++)c+='<option value="'+b.pageSizes[d]+'">'+b.pageSizes[d]+"</option>";a("#page-size-select").append(c),a("#page-size-select").val(b.currentPageSize),a("#page-size-select").change(function(){b.currentPageSize=parseInt(a(this).val(),10),b.updateResultsCount(),b.updateTable(),b.updatePaginator(),b.updatePageSelect()}),a("#show-page-select").change(function(){b.currentPage=parseInt(a(this).val(),10),b.updateResultsCount(),b.updateTable(),b.updatePaginator()}),this.updateResultsCount(),this.updatePaginator(),this.updatePageSelect()}else this.currentPageSize=this.data.length;this.updateTable()},updateTable:function(){var b,c,d,e="",f=[],g=[],h=0,i=this;for(a(".headTable table thead tr").empty(),a(".bodyTable table").empty(),a.each(this.columns,function(a,b){e+=i.sortable&&b===i.sortBy?i.reverse?'<th class="cellDiv"><span>'+b+'</span><span class="ui-arrow">&#x25BC;</span></th>':'<th class="cellDiv"><span>'+b+'</span><span class="ui-arrow">&#x25B2;</span></th>':'<th class="cellDiv"><span>'+b+"</span></th>"}),a(".headTable table thead tr").append(e),this.sortable&&a(".headTable table thead th.cellDiv").addClass("sortableHeader"),a.each(this.data.slice(this.startFeature,this.endFeature),function(b,c){var d="";a.each(c,function(a,c){d+=b%2!==0?'<td class="cellDiv oddRow"><span>'+c+"</span></td>":'<td class="cellDiv evenRow"><span>'+c+"</span></td>"}),a(".bodyTable table").append('<tr class="rowDiv">'+d+"</tr>")}),c=0;c<this.columns.length;c++)d=a(".headTable table").children().eq(0).children().eq(0).children().eq(c).outerWidth(),f[c]=d,g[c]?d>g[c]&&(g[c]=d):g[c]=d;for(b=0;b<this.currentPageSize;b++)for(c=0;c<this.columns.length;c++)d=a(".bodyTable table").children().eq(0).children().eq(b).children().eq(c).outerWidth(),g[c]?d>g[c]&&(g[c]=d):g[c]=d;for(c=0;c<this.columns.length;c++)a(".headTable table").children().eq(0).children().eq(0).children().eq(c).css("width",g[c]);for(b=0;b<this.currentPageSize;b++)for(c=0;c<this.columns.length;c++)a(".bodyTable table").children().eq(0).children().eq(b).children().eq(c).css("width",g[c]);for(b=0;b<g.length;b++)h+=g[b];a(".bodyTable").innerHeight(a(".tableContainer").innerHeight()-40),a(".outerTable").innerWidth(h+15),a(".headTable").innerWidth(h+15),a(".bodyTable").innerWidth(h+15),a(".bodyTable").width()<=a(".tableContainer").width()&&(a(".outerTable").css("width","100%"),a(".headTable").css("width","100%"),a(".bodyTable").css("width","100%"),a(".headTable table").css("width","100%"),a(".bodyTable table").css("width","100%"),a(".cellDiv").css("display","table-cell")),this.sortable&&a(".headTable .cellDiv").on("click",function(){var b=a(this).index();i.sortBy===i.columns[b]&&i.reverse===!1?(i.reverse=!0,i.sort(i.columns[b],!0)):(i.sortBy=i.columns[b],i.reverse=!1,i.sort(i.columns[b],!1)),i.currentPage=1,i.updateResultsCount(),i.updatePaginator(),i.updatePageSelect(),i.updateTable()})},updatePaginator:function(){var b=this,c={bootstrapMajorVersion:3,currentPage:b.currentPage,numberOfPages:b.paginatorSize,totalPages:b.totalPages,onPageClicked:function(a,c,d,e){b.currentPage=e,b.updateResultsCount(),b.updateTable(),b.updatePageSelect()}};a("#paginator").bootstrapPaginator(c)},updatePageSelect:function(){var b=this,c="";a("#show-page-select").empty();for(var d=1;d<=b.totalPages;d++)c+='<option value="'+d+'">'+d+"</option>";a("#show-page-select").append(c),a("#show-page-select").val(b.currentPage)},updatePageSizeSelect:function(){var b=this;a("#page-size-select").val(b.currentPageSize)},updateResultsCount:function(){var b=this;b.totalPages=b.data.length%b.currentPageSize===0?parseInt(b.data.length/b.currentPageSize,10):parseInt(b.data.length/b.currentPageSize,10)+1,b.currentPage>b.totalPages&&(b.currentPage=b.totalPages),b.startFeature=(b.currentPage-1)*b.currentPageSize,b.endFeature=b.currentPage===b.totalPages?b.data.length:parseInt(b.startFeature,10)+b.currentPageSize,a("#resultsCountDiv").empty(),a("#resultsCountDiv").append(0===b.data.length?"No items":b.startFeature+1+" - "+b.endFeature+" of "+b.data.length+" items")},generateDatatableTemplate:function(){var a='<div class="tableContainer"><div class="outerTable"><div class="headTable"><table><thead><tr class="rowDiv"></tr></thead></table></div><div class="bodyTable"><table></table></div></div></div>',b='<div id="tableFooter"><div id="leftFooterDiv"><div id="pageSelector">Go to page:<select id="show-page-select" class="form-control"></select></div><div id="resultsCountDiv"></div></div><div id="centerFooterDiv"><ul id="paginator"></ul></div><div id="rightFooterDiv"><div id="pageSizeSelector">Page size:<select id="page-size-select" class="form-control"></select></div></div></div>';return this.pagination&&(a+=b),a},sort:function(a,c){this.data.sort(c?b("-"+a):b(a))}}}(jQuery);